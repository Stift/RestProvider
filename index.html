<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>REST Provider: Type providers made easy
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="F# type provider that lets you create type providers just by implementing a simple REST service"/>
    <meta name="author" content="Tomas Petricek"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="/RestProvider/content/style.css" />
    <script type="text/javascript" src="/RestProvider/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/fsprojects/RestProvider">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/RestProvider/index.html">RestProvider</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="REST-Provider-Type-providers-made-easy" class="anchor" href="#REST-Provider-Type-providers-made-easy">REST Provider: Type providers made easy</a></h1>
<p>F# type providers are amazing - they can be used for a wide range of things such as reading
data in <a href="http://fsharp.github.io/FSharp.Data/library/CsvProvider.html">CSV</a>,
<a href="http://fsharp.github.io/FSharp.Data/library/JsonProvider.html">JSON</a> and
<a href="http://fsharp.github.io/FSharp.Data/library/XmlProvider.html">XML</a> formats,
accessing <a href="http://fsprojects.github.io/SQLProvider/">SQL databases</a>,
reading data exposed by international organizations such as the
<a href="http://fsharp.github.io/FSharp.Data/library/WorldBank.html">World Bank</a>, interoperating
with <a href="bluemountaincapital.github.io/FSharpRProvider/">the R langauge</a>, but also fun things
like <a href="http://www.pinksquirrellabs.com/post/2013/07/29/Choose-Your-Own-Adventure-Type-Provider.aspx">playing adventure games in your
editor</a>.</p>
<p>Sadly, <em>writing type providers</em> is not very easy. You have to use fairly complicated
<a href="https://github.com/fsprojects/FSharp.TypeProviders.StarterPack">provided types API</a> and
<a href="http://blog.mavnn.co.uk/type-providers-from-the-ground-up/">learn how to use</a> advanced F#
features like <code>&lt;@@ "code" + "quotations" @@&gt;</code>.
Wouldn't it be nice if you could create type providers without all this complexity?
The REST provider is a project that does exactly this. The idea is simple:</p>
<ul>
<li>
<p>You write a simple REST service that provides endpoints representing the different provided
types and returns information about the types in a simple JSON format. You can write the
service in F# or anything else you fancy.</p>
</li>
<li>
<p>You pass the URL for your service to REST type provider by writing
<code>RestProvider&lt;"http://myservice/provider"&gt;</code> and the REST provider takes care of doing all the
magic that is needed to provide types.</p>
</li>
</ul>
<h2><a name="Minimal-type-provider-sample" class="anchor" href="#Minimal-type-provider-sample">Minimal type provider sample</a></h2>
<p>You can find a number of samples in the <a href="https://github.com/fsprojects/RestProvider/tree/master/src/SuaveSources">REST provider repository</a>
and you can read more <a href="protocol.html">about the protocol</a> and other fun examples in the detailed
documentation (see links below), but just to give you a taste - the following calls the
<a href="https://github.com/fsprojects/RestProvider/tree/master/src/SuaveSources/minimal">minimal</a> sample
provider that returns information about cities:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#r</span> <span class="s">&quot;TheGamma.RestProvider.dll&quot;</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">TheGamma</span>

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="t">cities</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="t">RestProvider</span><span class="o">&lt;</span><span class="s">&quot;http://localhost:10042/minimal&quot;</span><span class="o">&gt;</span>

<span onmouseout="hideTip(event, 'fs2', 4)" onmouseover="showTip(event, 'fs2', 4)" class="t">cities</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs4', 5)" onmouseover="showTip(event, 'fs4', 5)" class="i">London</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs5', 6)" onmouseover="showTip(event, 'fs5', 6)" class="i">Population</span>
<span onmouseout="hideTip(event, 'fs2', 7)" onmouseover="showTip(event, 'fs2', 7)" class="t">cities</span><span class="o">.</span><span class="i">``New York``</span><span class="o">.</span><span class="i">Population</span>
</code></pre></td>
</tr>
</table>
<p>When you clone the repository, you can start the server that hosts sample providers by running
<code>build RunServers</code>. This will start a lightweight Suave server that runs on port 10042 which
is then called by the <code>RestProvider</code>. In the above example, we look at population of two cities
using a type representing a city with members <code>London</code> and <code>New York</code>. The members return value
of another type representing an indicator which has a member <code>Population</code>.</p>
<h3><a name="Implementing-the-type-provider-protocol" class="anchor" href="#Implementing-the-type-provider-protocol">Implementing the type provider protocol</a></h3>
<p>The server that is behind the above type provider is very simple. The REST provider first makes
a request to the base URL passed in the type provider argument:</p>
<p><code>GET /minimal/</code></p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="javascript">[ { <span class="s">"name"</span>:<span class="s">"London"</span>, <span class="s">"trace"</span>:[<span class="s">"London"</span>],
    <span class="s">"returns"</span>:{<span class="s">"kind"</span>:<span class="s">"nested"</span>, <span class="s">"endpoint"</span>:<span class="s">"/city"</span>} },
  { <span class="s">"name"</span>:<span class="s">"New York"</span>,<span class="s">"trace"</span>:[<span class="s">"NYC"</span>],
    <span class="s">"returns"</span>:{<span class="s">"kind"</span>:<span class="s">"nested"</span>,<span class="s">"endpoint"</span>:<span class="s">"/city"</span>} }]
</code></pre></td></tr></table>
<p>The response returns a list of members with <code>name</code> (the name of the property). The <code>returns</code>
field specifies the type of the result - here, we are just saying that the result is another
provided type that can be obtained by making a relative request to <code>/city</code>. The <code>trace</code> field
represents an information that will be used later once we try to get the data - you can think
of <code>/city</code> as a <em>type</em> and <code>trace</code> values (<code>"London"</code> or <code>"NYC"</code>) as <em>values</em> of that type.
When you type <code>cities.London</code>, the provider requests type for the city:</p>
<p><code>GET /minimal/city</code></p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="javascript">[ { <span class="s">"name"</span>:<span class="s">"Population"</span>, <span class="s">"trace"</span>:[<span class="s">"Population"</span>],
    <span class="s">"returns"</span>:{<span class="s">"kind"</span>:<span class="s">"primitive"</span>,<span class="s">"type"</span>:<span class="s">"int"</span>,<span class="s">"endpoint"</span>:<span class="s">"/data"</span>} },
  { <span class="s">"name"</span>:<span class="s">"Settled"</span>, <span class="s">"trace"</span>:[<span class="s">"Settled"</span>],
    <span class="s">"returns"</span>:{<span class="s">"kind"</span>:<span class="s">"primitive"</span>,<span class="s">"type"</span>:<span class="s">"int"</span>,<span class="s">"endpoint"</span>:<span class="s">"/data"</span>} }]
</code></pre></td></tr></table>
<p>As before, the <code>/city</code> type has a number of members (that will appear as properties). They both
add a value to <code>trace</code> to track what data we want to get at the end. The <code>returns</code> field now says
that the result is a primitive type <code>int</code>. It also specifies the endpoint for accessing the data.
The endpoint is called when you evaluate <code>cities.London.Population</code>:</p>
<p><code>POST /minimal/data</code> with body <code>London&amp;Population</code></p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="javascript"><span class="n">538689</span>
</code></pre></td></tr></table>
<p>The provider accumulates <code>trace</code> values that are generated by the individual members that we
encounter as we "dot through" the provided types, concatenates it using <code>&amp;</code> and passes it as the
body to the <code>/data</code> endpoint. For primitive <code>int</code> types, the endpoint just returns the number.</p>
<h2><a name="More-information" class="anchor" href="#More-information">More information</a></h2>
<h3><a name="Work-in-progress" class="anchor" href="#Work-in-progress">Work in progress</a></h3>
<p>This project is still very experimental and everything is likely going to change, including the
protocol that is used for the communication between the REST server and the type provider. There
are many things that the provider should, but does not support yet (say, providing methods) and
the protocol is too simplistic. If you have thoughts, please <a href="https://github.com/fsprojects/RestProvider/issues">comment on GitHub
issues</a>!</p>
<p>This documentation contains some more information about the <a href="protocol.html">current version of the protocol</a>
and also a few examples for creating providers (see the menu on the right for the latests links).
You can also browse the <a href="https://github.com/fsprojects/RestProvider/tree/master/src/SuaveSources">Suave sources</a>
directory on GitHub, which contains sample data providers written using <a href="http://suave.io">Suave</a>.</p>
<h3><a name="Contributing-and-license" class="anchor" href="#Contributing-and-license">Contributing and license</a></h3>
<p>The project is hosted on <a href="https://github.com/fsprojects/RestProvider">GitHub</a> where you can <a href="https://github.com/fsprojects/RestProvider/issues">report issues</a>, fork
the project and submit pull requests. If you're adding a new public API, please also
consider adding <a href="https://github.com/fsprojects/RestProvider/tree/master/docs/content">samples</a> that can be turned into a documentation.</p>
<p>The library is available under the Apache 2.0 license, which allows modification and
redistribution for both commercial and non-commercial purposes. For more information see the
<a href="https://github.com/fsprojects/RestProvider/blob/master/LICENSE.txt">License file</a> in the GitHub repository.</p>

<div class="tip" id="fs1">namespace TheGamma</div>
<div class="tip" id="fs2">type cities = RestProvider&lt;...&gt;<br /><br />Full name: Index.cities</div>
<div class="tip" id="fs3">Multiple items<br />namespace RestProvider<br /><br />--------------------<br />type RestProvider<br /><br />Full name: TheGamma.RestProvider<br /><em><br /><br /><br />&#160;&#160;&#160;&#160;&lt;summary&gt;A provider&lt;/summary&gt;<br />&#160;&#160;&#160;&#160;&lt;param name=&quot;Source&quot;&gt;A thing&lt;/param&gt;</em></div>
<div class="tip" id="fs4">property RestProvider&lt;...&gt;.London: RestProvider&lt;...&gt;.types.city<br /><em><br /><br />&lt;summary&gt;//city&lt;/summary&gt;</em></div>
<div class="tip" id="fs5">property RestProvider&lt;...&gt;.types.city.Population: int<br /><em><br /><br />&lt;summary&gt;/primitive&lt;/summary&gt;</em></div>

        </div>
        <div class="span3">
          <img src="/RestProvider/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">RestProvider</li>
            <li><a href="/RestProvider/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/RestProvider">Get Library via NuGet</a></li>
            <li><a href="http://github.com/fsprojects/RestProvider">Source Code on GitHub</a></li>
            <li><a href="/RestProvider/license.html">License</a></li>
            <li><a href="/RestProvider/release-notes.html">Release Notes</a></li>

            <li class="nav-header">Protocol</li>
            <li><a href="/RestProvider/protocol.html">REST Provider protocol</a></li>

            <li class="nav-header">Suave demos</li>
            <li><a href="/RestProvider/minimal.html">Minimal demo</a></li>
            <!--
            <li><a href="/RestProvider/adventure.html">Adventure game</a></li>
            -->
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/fsprojects/RestProvider"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
  </html>
